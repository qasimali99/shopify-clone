<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Orders</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body { background: #f4f6f8; display: flex; }
    .sidebar {
      width: 230px; background: #1a73e8; color: white; padding: 20px;
      height: 100vh; overflow-y: auto; position: fixed; top: 0; left: 0;
    }
    .sidebar h2 { font-size: 20px; margin-bottom: 30px; }
    .sidebar ul { list-style: none; padding: 0; margin: 0; }
    .sidebar li { margin: 12px 0; }
    .sidebar a {
      color: white; text-decoration: none; font-weight: 500;
      display: flex; align-items: center; gap: 10px;
      padding: 6px 10px; border-radius: 6px;
      transition: background 0.2s, padding-left 0.2s;
    }
    .sidebar a:hover, .sidebar a.active {
      background: rgba(255, 255, 255, 0.15); padding-left: 16px;
    }
    .main {
      margin-left: 230px; padding: 30px; width: calc(100% - 230px);
    }
    .main h1 { margin-bottom: 20px; font-size: 26px; }
    .controls {
      display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;
    }
    .controls input, .controls select {
      padding: 8px 14px; border: 1px solid #ccc; border-radius: 6px;
    }
    .orders-table {
      width: 100%; border-collapse: collapse; background: #fff;
      border-radius: 10px; overflow: hidden;
      box-shadow: 0 0 8px rgba(0,0,0,0.06);
    }
    .orders-table th, .orders-table td {
      padding: 12px 16px; text-align: left; border-bottom: 1px solid #eee;
    }
    .orders-table th { background-color: #f0f2f5; font-weight: 600; }
    .badge {
      padding: 4px 10px; border-radius: 12px; font-size: 12px;
      font-weight: bold; display: inline-block;
    }
    .paid { background: #d4f7dc; color: #1e8e3e; }
    .unpaid { background: #fde2e2; color: #c62828; }
    .pending { background: #fff3cd; color: #8a6d3b; }
    .delivered { background: #d1ecf1; color: #0c5460; }
    .cancelled { background: #f8d7da; color: #721c24; }
    .actions a {
      margin-right: 8px; text-decoration: none;
      color: #1a73e8; font-weight: 500; cursor: pointer;
    }
    .customer-hover { position: relative; cursor: pointer; }
    .customer-hover:hover .details { display: block; }
    .details {
      display: none; position: absolute; background: #fff; border: 1px solid #ccc;
      padding: 10px; font-size: 13px; top: 24px; left: 0; z-index: 100;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1); white-space: nowrap;
    }
    .modal {
      display: none; position: fixed; z-index: 1000; left: 0; top: 0;
      width: 100%; height: 100%; background: rgba(0,0,0,0.5);
      justify-content: center; align-items: center;
    }
    .modal-content {
      background: #fff; padding: 20px; border-radius: 10px; max-width: 500px;
      width: 90%; position: relative;
    }
    .modal-content img {
      width: 100px; height: 100px; object-fit: cover; border-radius: 8px;
      margin-bottom: 10px;
    }
    .close-btn {
      position: absolute; top: 10px; right: 15px; font-size: 20px;
      color: #888; cursor: pointer;
    }
    .modal-content h3 { margin-top: 0; }
    .modal-content p { margin: 4px 0; font-size: 14px; }
  </style>
</head>
<body>
  <div class="sidebar" id="sidebar">
    <h2 id="storeTitle">Your Store</h2>
    <ul>
      <li><a href="home.html"><i class="fas fa-home"></i> Home</a></li>
      <li><a class="active" href="orders.html"><i class="fas fa-shopping-cart"></i> Orders</a></li>
      <li><a href="products.html"><i class="fas fa-box"></i> Products</a></li>
      <li><a href="inventory.html"><i class="fas fa-warehouse"></i> Inventory</a></li>
      <li><a href="collections.html"><i class="fas fa-th"></i> Collections</a></li>
      <li><a href="customers.html"><i class="fas fa-users"></i> Customers</a></li>
      <li><a href="content.html"><i class="fas fa-file-alt"></i> Content</a></li>
      <li><a href="marketing.html"><i class="fas fa-bullhorn"></i> Marketing</a></li>
      <li><a href="themes.html"><i class="fas fa-palette"></i> Store Themes</a></li>
      <li><a href="markets.html"><i class="fas fa-globe"></i> Markets</a></li>
      <li><a href="analytics.html"><i class="fas fa-chart-line"></i> Analytics</a></li>
      <li><a href="discounts.html"><i class="fas fa-tags"></i> Discounts</a></li>
      <li><a href="sales-channels.html"><i class="fas fa-store"></i> Sales Channels</a></li>
    </ul>
    <ul style="margin-top: 30px;">
      <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
      <li><a href="logout.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
    </ul>
  </div>

  <div class="main">
    <h1>Orders</h1>
    <div class="controls">
      <input type="text" id="searchInput" placeholder="Search by customer, order ID...">
      <select id="deliveryFilter">
        <option value="">All Delivery Status</option>
        <option value="delivered">Delivered</option>
        <option value="pending">Pending</option>
        <option value="cancelled">Cancelled</option>
      </select>
      <select id="paymentStatusFilter">
        <option value="">All Payment Status</option>
        <option value="paid">Paid</option>
        <option value="unpaid">Unpaid</option>
      </select>
      <select id="paymentMethodFilter">
        <option value="">All Payment Methods</option>
        <option value="COD">COD</option>
        <option value="Card">Card</option>
      </select>
    </div>
    <table class="orders-table">
      <thead>
        <tr>
          <th>Order ID</th><th>Date</th><th>Customer</th>
          <th>Payment</th><th>Payment Status</th><th>Delivery Status</th>
          <th>Channel</th><th>Actions</th>
        </tr>
      </thead>
      <tbody id="orderTableBody"></tbody>
    </table>
  </div>

  <div class="modal" id="viewModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <img src="https://via.placeholder.com/100" id="productImage" />
      <h3 id="modalCustomer"></h3>
      <p><strong>Email:</strong> <span id="modalEmail"></span></p>
      <p><strong>Phone:</strong> <span id="modalPhone"></span></p>
      <p><strong>Location:</strong> Lahore, Pakistan</p>
      <p><strong>Order No:</strong> <span id="modalOrderID"></span></p>
      <p><strong>Date:</strong> <span id="modalDate"></span></p>
      <p><strong>Time:</strong> 12:30 PM</p>
      <p><strong>Channel:</strong> <span id="modalChannel"></span></p>
      <p><strong>Item:</strong> Wireless Headphones</p>
      <p><strong>Total Bill:</strong> Rs. 5,000</p>
    </div>
  </div>

  <script>
    const store = localStorage.getItem("store_name");
    const storeTitle = document.getElementById("storeTitle");
    if (store && storeTitle) storeTitle.textContent = store + " Store";

    const tbody = document.getElementById("orderTableBody");
    const orders = [];

    for (let i = 0; i < 20; i++) {
      orders.push({
        id: `#ORD${1000 + i}`,
        date: `2025-07-${10 + (i % 10)}`,
        customer: `Ali Khan`,
        phone: `0300-123456${i}`,
        email: `ali${i}@mail.com`,
        payment: i % 2 === 0 ? "COD" : "Card",
        paymentStatus: i % 2 === 0 ? 'Paid' : 'Unpaid',
        deliveryStatus: i % 3 === 0 ? 'Delivered' : i % 3 === 1 ? 'Pending' : 'Cancelled',
        channel: "Website"
      });
    }

    function renderTable(data) {
      tbody.innerHTML = "";
      data.forEach(order => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${order.id}</td>
          <td>${order.date}</td>
          <td class="customer-hover">
            ${order.customer}
            <div class="details">
              üìû ${order.phone}<br/>
              üìß ${order.email}<br/>
              üè† Lahore, PK
            </div>
          </td>
          <td>${order.payment}</td>
          <td><span class="badge ${order.paymentStatus.toLowerCase()}">${order.paymentStatus}</span></td>
          <td><span class="badge ${order.deliveryStatus.toLowerCase()}">${order.deliveryStatus}</span></td>
          <td>${order.channel}</td>
          <td class="actions">
            <a onclick='openModal(${JSON.stringify(order)})'>View</a>
            <a onclick='location.href="edit-order.html"'>Edit</a>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    function applyFilters() {
      const searchText = document.getElementById("searchInput").value.toLowerCase();
      const delivery = document.getElementById("deliveryFilter").value.toLowerCase();
      const paymentStatus = document.getElementById("paymentStatusFilter").value.toLowerCase();
      const paymentMethod = document.getElementById("paymentMethodFilter").value;

      const filtered = orders.filter(o => {
        return (
          (o.id.toLowerCase().includes(searchText) || o.customer.toLowerCase().includes(searchText)) &&
          (delivery === "" || o.deliveryStatus.toLowerCase() === delivery) &&
          (paymentStatus === "" || o.paymentStatus.toLowerCase() === paymentStatus) &&
          (paymentMethod === "" || o.payment === paymentMethod)
        );
      });

      renderTable(filtered);
    }

    function openModal(order) {
      document.getElementById("modalCustomer").innerText = order.customer;
      document.getElementById("modalEmail").innerText = order.email;
      document.getElementById("modalPhone").innerText = order.phone;
      document.getElementById("modalOrderID").innerText = order.id;
      document.getElementById("modalDate").innerText = order.date;
      document.getElementById("modalChannel").innerText = order.channel;
      document.getElementById("viewModal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("viewModal").style.display = "none";
    }

    window.addEventListener("DOMContentLoaded", () => {
      renderTable(orders);
      document.getElementById("searchInput").addEventListener("input", applyFilters);
      document.getElementById("deliveryFilter").addEventListener("change", applyFilters);
      document.getElementById("paymentStatusFilter").addEventListener("change", applyFilters);
      document.getElementById("paymentMethodFilter").addEventListener("change", applyFilters);
    });
  </script>
</body>
</html>
