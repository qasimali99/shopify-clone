<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Inventory</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: #f4f6f8;
      display: flex;
    }

    .sidebar {
      width: 230px;
      background: #1a73e8;
      color: white;
      padding: 20px;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      overflow-y: auto;
    }

    .sidebar h2 {
      font-size: 20px;
      margin-bottom: 30px;
    }

    .sidebar ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .sidebar li {
      margin: 12px 0;
    }

    .sidebar a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 6px 10px;
      border-radius: 6px;
      transition: background 0.2s, padding-left 0.2s;
    }

    .sidebar a:hover,
    .sidebar a.active {
      background: rgba(255, 255, 255, 0.15);
      padding-left: 16px;
    }

    .main {
      margin-left: 230px;
      padding: 30px;
      width: calc(100% - 230px);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .header h1 {
      margin: 0;
      font-size: 24px;
      color: #333;
    }

    .add-btn {
      background: #2563eb;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .add-btn:hover {
      background: #1e40af;
    }

    .search input {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 250px;
      margin-bottom: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }

    th, td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }

    th {
      background: #f9fafb;
      font-weight: 600;
    }

    td {
      font-size: 14px;
      color: #333;
    }

    input.stock-input {
      width: 60px;
      padding: 4px;
      font-size: 14px;
    }

    .status-badge {
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      display: inline-block;
    }

    .status-in {
      background: #dcfce7;
      color: #166534;
    }

    .status-low {
      background: #fef3c7;
      color: #92400e;
    }

    .status-out {
      background: #fee2e2;
      color: #991b1b;
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <h2 id="storeTitle">Your Store</h2>
    <ul>
      <li><a href="home.html"><i class="fas fa-home"></i> Home</a></li>
      <li><a href="orders.html"><i class="fas fa-shopping-cart"></i> Orders</a></li>
      <li><a href="products.html"><i class="fas fa-box"></i> Products</a></li>
      <li><a href="inventory.html" class="active"><i class="fas fa-warehouse"></i> Inventory</a></li>
      <li><a href="collections.html"><i class="fas fa-th"></i> Collections</a></li>
      <li><a href="customers.html"><i class="fas fa-users"></i> Customers</a></li>
      <li><a href="content.html"><i class="fas fa-file-alt"></i> Content</a></li>
      <li><a href="marketing.html"><i class="fas fa-bullhorn"></i> Marketing</a></li>
      <li><a href="themes.html"><i class="fas fa-palette"></i> Store Themes</a></li>
      <li><a href="markets.html"><i class="fas fa-globe"></i> Markets</a></li>
      <li><a href="analytics.html"><i class="fas fa-chart-line"></i> Analytics</a></li>
      <li><a href="discounts.html"><i class="fas fa-tags"></i> Discounts</a></li>
      <li><a href="sales-channels.html"><i class="fas fa-store"></i> Sales Channels</a></li>
    </ul>
    <ul style="margin-top: 30px;">
      <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
      <li><a href="logout.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
    </ul>
  </div>

  <!-- Main Inventory Content -->
  <div class="main">
    <div class="header">
      <h1>Inventory</h1>
    <a href="edit-inventory.html" class="add-btn" style="text-decoration: none;">
  <i class="fas fa-plus"></i> Add Inventory
</a>
    </div>

    <div class="search">
      <input type="text" placeholder="Search inventory...">
<select id="statusFilter" style="padding: 8px 12px; border-radius: 6px; border: 1px solid #ccc; margin-left: 20px;">
  <option value="all">All</option>
  <option value="in">In Stock</option>
  <option value="low">Low Stock</option>
  <option value="out">Out of Stock</option>
</select>
</div>
    <table id="inventoryTable">
      <thead>
        <tr>
          <th>Product</th>
          <th>SKU</th>
          <th>Stock</th>
          <th>Status</th>
          <th>Location</th>
        </tr>
      </thead>
      <!-- Only the updated <tbody> and JS part shown, rest of HTML remains same -->

<tbody>
  <tr>
    <td>Blue Hoodie</td>
    <td>#HD001</td>
    <td><input type="number" value="120" class="stock-input" onchange="updateStatus(this)"></td>
    <td class="status-cell"></td>
    <td>
  <select class="location-select" onchange="handleLocationChange(this)">
    <option>Warehouse A</option>
    <option>Warehouse B</option>
    <option>Warehouse C</option>
    <option value="custom"> Custom...</option>
  </select>
</td>
  </tr>
  <tr>
    <td>White Sneakers</td>
    <td>#SN102</td>
    <td><input type="number" value="8" class="stock-input" onchange="updateStatus(this)"></td>
    <td class="status-cell"></td>
    <td>
  <select class="location-select" onchange="handleLocationChange(this)">
    <option>Warehouse A</option>
    <option>Warehouse B</option>
    <option>Warehouse C</option>
    <option value="custom"> Custom...</option>
  </select>
</td>
  </tr>
  <tr>
    <td>Graphic T-shirt</td>
    <td>#TS203</td>
    <td><input type="number" value="58" class="stock-input" onchange="updateStatus(this)"></td>
    <td class="status-cell"></td>
    <td>
  <select class="location-select" onchange="handleLocationChange(this)">
    <option>Warehouse A</option>
    <option>Warehouse B</option>
    <option>Warehouse C</option>
    <option value="custom"> Custom...</option>
  </select>
</td>
  </tr>
  <tr>
    <td>Sports Shorts</td>
    <td>#SS301</td>
    <td><input type="number" value="0" class="stock-input" onchange="updateStatus(this)"></td>
    <td class="status-cell"></td>
    <td>
  <select class="location-select" onchange="handleLocationChange(this)">
    <option>Warehouse A</option>
    <option>Warehouse B</option>
    <option>Warehouse C</option>
    <option value="custom"> Custom...</option>
  </select>
</td>
  </tr>
</tbody>

    </table>
  </div>

  <script>
  const store = localStorage.getItem("store_name");
  const storeTitle = document.getElementById("storeTitle");
  if (store && storeTitle) {
    storeTitle.textContent = `${store} Store`;
  }

  function updateStatus(input) {
    const row = input.closest("tr");
    const statusCell = row.querySelector(".status-cell");
    const stock = parseInt(input.value);

    let statusText = "";
    let statusClass = "";

    if (stock === 0) {
      statusText = "Out of Stock";
      statusClass = "status-out";
    } else if (stock < 10) {
      statusText = "Low Stock";
      statusClass = "status-low";
    } else {
      statusText = "In Stock";
      statusClass = "status-in";
    }

    statusCell.innerHTML = `<span class="status-badge ${statusClass}">${statusText}</span>`;
  }

  document.querySelectorAll(".stock-input").forEach(input => updateStatus(input));

  function handleLocationChange(selectElement) {
    if (selectElement.value === "custom") {
      const td = selectElement.parentElement;
      const input = document.createElement("input");
      input.type = "text";
      input.className = "location-input";
      input.placeholder = "Enter custom location";
      input.value = "";
      input.onblur = () => {
        if (input.value.trim() !== "") {
          td.innerHTML = "";
          td.appendChild(input); // remain editable
        } else {
          td.innerHTML = `
            <select class="location-select" onchange="handleLocationChange(this)">
              <option>Warehouse A</option>
              <option>Warehouse B</option>
              <option>Warehouse C</option>
              <option value="custom" selected> Custom...</option>
            </select>`;
        }
      };
      td.innerHTML = "";
      td.appendChild(input);
      input.focus();
    }
  }
  // âœ… SEARCH & FILTER LOGIC
  const searchInput = document.querySelector(".search input");
  const statusFilter = document.getElementById("statusFilter");
  const tableRows = document.querySelectorAll("#inventoryTable tbody tr");

  searchInput.addEventListener("input", applySearchAndFilter);
  statusFilter.addEventListener("change", applySearchAndFilter);

  function applySearchAndFilter() {
    const searchValue = searchInput.value.toLowerCase();
    const selectedStatus = statusFilter.value;

    tableRows.forEach(row => {
      const product = row.cells[0].textContent.toLowerCase();
      const sku = row.cells[1].textContent.toLowerCase();
      const rowStatus = row.getAttribute("data-status");

      const matchesSearch = product.includes(searchValue) || sku.includes(searchValue);
      const matchesStatus = selectedStatus === "all" || selectedStatus === rowStatus;

      if (matchesSearch && matchesStatus) {
        row.style.display = "";
      } else {
        row.style.display = "none";
      }
    });
  }
</script>
</body>
</html>
